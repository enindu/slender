<IfModule mod_rewrite.c>
  # Turn on rewrite engine
  RewriteEngine On

  # Rewrite URL
  #RewriteCond %{HTTP_HOST} !=""
  #RewriteCond %{HTTP_HOST} !^www\. [NC]
  #RewriteCond %{HTTPS}s ^on(s)|
  #RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # Remove tailing slash
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} (.+)/$
  RewriteRule ^ %1 [R,L]

  # Blacklist files
  RewriteRule /?\.gitignore$ - [F,L]
  RewriteRule /?\.htaccess$ - [F,L]
  RewriteRule /?\.json$ - [F,L]
  RewriteRule /?\.lock$ - [F,L]
  RewriteRule /?\.md$ - [F,L]

  # Blacklist directories
  RewriteRule ^app/.* index.php [F,L]
  RewriteRule ^bootstrap/.* index.php [F,L]
  RewriteRule ^cache/.* index.php [F,L]
  RewriteRule ^containers/.* index.php [F,L]
  RewriteRule ^resources/templates/.* index.php [F,L]
  RewriteRule ^resources/views/.* index.php [F,L]
  RewriteRule ^sources/.* index.php [F,L]
  RewriteRule ^vendor/.* index.php [F,L]

  # Standard route
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [QSA,L]
</IfModule>

<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|js|css|webp|svg)$">
  Header set Cache-Control "public, max-age=31536000"
</FilesMatch>
